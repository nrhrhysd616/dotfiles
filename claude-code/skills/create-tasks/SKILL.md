# create-tasks

仕様書を読み込み、レビュー・改善を経て、Claude Codeが自律実行可能なタスクファイル群に分解するスキル。

## 起動方法

`/create-tasks <仕様書パス>`

例: `/create-tasks docs/Phase2-Specification.md`

## 引数

- `$ARGUMENTS`: 仕様書ファイルのパス（必須）

## 実行フロー

以下の4フェーズを順に実行する。各フェーズの完了をユーザーに報告してから次へ進むこと。

---

### Phase 1: 仕様書レビュー・改善

1. `$ARGUMENTS` で指定された仕様書を読み込む
2. 以下の観点でレビューを行う:
   - **実装可能性**: 曖昧な記述・未決定事項・技術的矛盾の洗い出し
   - **網羅性**: エラーハンドリング・エッジケース・境界条件の抜け漏れ
   - **一貫性**: 用語・命名規則・データフロー上の矛盾
3. 問題点をユーザーに提示し、対話で解決する
4. 必要に応じて仕様書を更新する（ユーザーの許可を得ること）

---

### Phase 2: 技術選定の確認

1. `CLAUDE.md` および既存コードから現在の技術スタックを把握する
2. 仕様書中で未決定の技術選定があればユーザーに質問する
3. 確定した技術スタックを明示的にまとめる

---

### Phase 3: タスク細分化

1. 仕様書の機能を、依存関係を考慮した実行順序でタスクに分解する
2. 各タスクを個別のMDファイルとして出力する
3. 各タスクファイルには以下を含めること:
   - **目的**: このタスクで何を実現するか
   - **依存タスク**: 先に完了すべきタスク番号
   - **実装ファイル**: 作成・変更するファイルパスの一覧
   - **実装する関数/クラス**: シグネチャと簡潔な説明
   - **テストケース**: テストすべき項目の一覧
   - **モック方針**: 外部依存のモック方法
   - **完了条件**: このタスクが完了したと判断する基準

#### タスクファイルの出力先規約

仕様書のパスからフェーズ名を抽出し、同階層の `tasks/` ディレクトリに出力する:

| 仕様書パス                     | 出力先                      |
| ------------------------------ | --------------------------- |
| `docs/Phase1-Specification.md` | `docs/phase1/tasks/`        |
| `docs/Phase2-Specification.md` | `docs/phase2/tasks/`        |
| `specs/feature-auth.md`        | `specs/feature-auth/tasks/` |

ファイル名は `{番号2桁}-{kebab-case名}.md` とする（例: `01-project-init.md`）。

---

### Phase 4: 概要ファイル出力

タスク出力先ディレクトリに `00-overview.md` を作成し、以下を含める:

1. **タスク一覧表**: 番号・タスク名・概要
2. **依存関係図**: ASCII アートで表現
3. **並行実行可能なタスクグループ**
4. **前提条件**: 技術スタック・環境要件

---

## 注意事項

- 各タスクは「Claude Codeが1セッションで自律実行可能な粒度」にすること
- タスクの粒度が大きすぎる場合はサブタスクに分割する
- テストファーストを基本とし、各タスクにテストケースを必ず含める
- 既存のプロジェクト規約（CLAUDE.md）に従った型定義・命名規則を使用する
